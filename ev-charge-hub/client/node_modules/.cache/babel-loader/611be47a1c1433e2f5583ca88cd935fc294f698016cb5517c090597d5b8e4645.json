{"ast":null,"code":"var _jsxFileName = \"D:\\\\UnifiedMentor\\\\electric-charger-hub\\\\ev-charge-hub\\\\client\\\\src\\\\components\\\\user\\\\ResheduleSlot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Calendar, Clock, MapPin, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\nimport Footer from \"../common/Footer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RescheduleBookingForm = ({\n  booking,\n  onRescheduleSuccess,\n  onCancel\n}) => {\n  _s();\n  var _booking$bunkId, _booking$bunkId2;\n  const [selectedDate, setSelectedDate] = useState(\"\");\n  const [availableSlots, setAvailableSlots] = useState([]);\n  const [selectedSlot, setSelectedSlot] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({\n    text: \"\",\n    type: \"\"\n  });\n\n  // Set default date to booking date when component mounts\n  useEffect(() => {\n    if (booking && booking.startTime) {\n      const bookingDate = new Date(booking.startTime);\n      setSelectedDate(bookingDate.toISOString().split('T')[0]);\n    }\n  }, [booking]);\n\n  // Fetch available slots when date changes\n  useEffect(() => {\n    const fetchAvailableSlots = async () => {\n      if (!booking || !booking.bunkId || !booking.bunkId._id || !selectedDate) return;\n      setLoading(true);\n      try {\n        // Replace with your actual API call\n        const res = await fetch(`/api/bookings/available-slots/${booking.bunkId._id}/${selectedDate}`);\n        const data = await res.json();\n        setAvailableSlots(data.data.availableSlots || []);\n      } catch (err) {\n        console.error(\"Error fetching available slots:\", err);\n        setMessage({\n          text: \"Failed to load available slots\",\n          type: \"error\"\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAvailableSlots();\n  }, [selectedDate, booking]);\n  const handleSubmit = async () => {\n    if (!selectedSlot) {\n      setMessage({\n        text: \"Please select a new time slot\",\n        type: \"error\"\n      });\n      return;\n    }\n    setLoading(true);\n    try {\n      // First check if slot is still available\n      const checkRes = await fetch(\"/api/bookings/check-availability\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          bunkId: booking.bunkId._id,\n          slotTime: selectedSlot\n        })\n      });\n      const checkData = await checkRes.json();\n      if (!checkData.data.available) {\n        setMessage({\n          text: \"Sorry, this slot was just booked. Please select another.\",\n          type: \"error\"\n        });\n        return;\n      }\n\n      // If available, reschedule the booking\n      const response = await fetch(`/api/bookings/reschedule/${booking._id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        body: JSON.stringify({\n          slotTime: selectedSlot\n        })\n      });\n      const data = await response.json();\n      setMessage({\n        text: \"Booking rescheduled successfully!\",\n        type: \"success\"\n      });\n\n      // Notify parent component of successful reschedule\n      if (onRescheduleSuccess && typeof onRescheduleSuccess === 'function') {\n        onRescheduleSuccess(data.data);\n      }\n    } catch (err) {\n      console.error(\"Reschedule error:\", err);\n      setMessage({\n        text: \"Reschedule failed. Please try again.\",\n        type: \"error\"\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Enhanced function to format time slots as ranges\n  const formatTimeSlot = slotData => {\n    if (!slotData) return \"\";\n    let startTime, endTime;\n\n    // Handle different slot data formats\n    if (typeof slotData === 'string') {\n      // If it's an ISO string\n      if (slotData.includes('T')) {\n        startTime = new Date(slotData);\n        // Assume 1-hour duration if no end time provided\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\n      }\n      // If it's just time like \"14:30\"\n      else if (slotData.includes(':')) {\n        const [hours, minutes] = slotData.split(':');\n        const today = new Date();\n        startTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), parseInt(hours), parseInt(minutes));\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\n      }\n    }\n    // If it's an object with start and end times\n    else if (typeof slotData === 'object') {\n      if (slotData.startTime && slotData.endTime) {\n        startTime = new Date(slotData.startTime);\n        endTime = new Date(slotData.endTime);\n      } else if (slotData.time) {\n        startTime = new Date(slotData.time);\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\n      }\n    }\n    if (!startTime || !endTime) {\n      console.warn('Could not parse slot time:', slotData);\n      return String(slotData);\n    }\n    const formatTime = date => {\n      const hours = date.getHours();\n      const minutes = date.getMinutes();\n      const ampm = hours >= 12 ? 'PM' : 'AM';\n      const hour = hours % 12 || 12;\n\n      // Only show minutes if they're not 00\n      if (minutes === 0) {\n        return `${hour} ${ampm}`;\n      } else {\n        return `${hour}:${minutes.toString().padStart(2, '0')} ${ampm}`;\n      }\n    };\n    const startFormatted = formatTime(startTime);\n    const endFormatted = formatTime(endTime);\n\n    // If both times have the same AM/PM, show it only once\n    const startAMPM = startTime.getHours() >= 12 ? 'PM' : 'AM';\n    const endAMPM = endTime.getHours() >= 12 ? 'PM' : 'AM';\n    if (startAMPM === endAMPM) {\n      const startWithoutAMPM = startFormatted.replace(` ${startAMPM}`, '');\n      return `${startWithoutAMPM} - ${endFormatted}`;\n    } else {\n      return `${startFormatted} - ${endFormatted}`;\n    }\n  };\n\n  // Format the current booking time for display\n  const getCurrentBookingTime = () => {\n    if (!booking || !booking.startTime) return \"\";\n    const startTime = new Date(booking.startTime);\n    const endTime = new Date(booking.endTime);\n    const formatTime = date => {\n      const hours = date.getHours();\n      const minutes = date.getMinutes();\n      const ampm = hours >= 12 ? 'PM' : 'AM';\n      const hour = hours % 12 || 12;\n      if (minutes === 0) {\n        return `${hour} ${ampm}`;\n      } else {\n        return `${hour}:${minutes.toString().padStart(2, '0')} ${ampm}`;\n      }\n    };\n    const startFormatted = formatTime(startTime);\n    const endFormatted = formatTime(endTime);\n\n    // If both times have the same AM/PM, show it only once\n    const startAMPM = startTime.getHours() >= 12 ? 'PM' : 'AM';\n    const endAMPM = endTime.getHours() >= 12 ? 'PM' : 'AM';\n    if (startAMPM === endAMPM) {\n      const startWithoutAMPM = startFormatted.replace(` ${startAMPM}`, '');\n      return `${startWithoutAMPM} - ${endFormatted}`;\n    } else {\n      return `${startFormatted} - ${endFormatted}`;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-white flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(Calendar, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), \"Reschedule Booking\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-blue-100 mt-1\",\n        children: \"Select a new date and time for your booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-8 p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start justify-between\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm font-medium text-gray-600 uppercase tracking-wide mb-2\",\n              children: \"Current Booking\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold text-gray-900 mb-2\",\n              children: (booking === null || booking === void 0 ? void 0 : (_booking$bunkId = booking.bunkId) === null || _booking$bunkId === void 0 ? void 0 : _booking$bunkId.name) || 'Loading...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-4 text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm\",\n                  children: (booking === null || booking === void 0 ? void 0 : (_booking$bunkId2 = booking.bunkId) === null || _booking$bunkId2 === void 0 ? void 0 : _booking$bunkId2.location) || 'Unknown location'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Clock, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-blue-600\",\n                  children: getCurrentBookingTime()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"date\",\n            className: \"block text-sm font-semibold text-gray-800 uppercase tracking-wide\",\n            children: \"Select New Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"date\",\n              type: \"date\",\n              value: selectedDate,\n              onChange: e => setSelectedDate(e.target.value),\n              className: \"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg\",\n              min: new Date().toISOString().split('T')[0],\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n              className: \"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), selectedDate && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-semibold text-gray-800 uppercase tracking-wide\",\n            children: \"Select New Time Slot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center py-12 text-gray-500\",\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"w-6 h-6 animate-spin mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 19\n            }, this), \"Loading available slots...\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 17\n          }, this) : availableSlots.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\",\n            children: availableSlots.map((slot, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setSelectedSlot(slot),\n              className: `group relative p-4 rounded-xl border-2 transition-all duration-200 transform hover:scale-105 ${selectedSlot === slot ? 'bg-blue-600 border-blue-600 text-white shadow-lg' : 'bg-white border-gray-200 text-gray-800 hover:border-blue-300 hover:shadow-md'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(Clock, {\n                  className: `w-4 h-4 mr-2 ${selectedSlot === slot ? 'text-white' : 'text-gray-500'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: formatTimeSlot(slot)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 23\n              }, this), selectedSlot === slot && /*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"absolute -top-2 -right-2 w-6 h-6 text-white bg-blue-600 rounded-full\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 25\n              }, this)]\n            }, (slot === null || slot === void 0 ? void 0 : slot.id) || (slot === null || slot === void 0 ? void 0 : slot.time) || slot || index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-12\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-12 h-12 text-gray-400 mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500 text-lg\",\n              children: \"No available slots for this date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm mt-1\",\n              children: \"Please try selecting a different date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onCancel,\n            className: \"flex-1 py-4 px-6 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-300 focus:ring-offset-2\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: handleSubmit,\n            disabled: loading || !selectedSlot,\n            className: `flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-200 focus:ring-2 focus:ring-offset-2 ${loading || !selectedSlot ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 focus:ring-blue-500 shadow-lg hover:shadow-xl transform hover:scale-105'}`,\n            children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"w-5 h-5 animate-spin mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), \"Processing...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this) : 'Reschedule Booking'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `p-4 rounded-xl border-l-4 ${message.type === 'success' ? 'bg-green-50 border-green-400 text-green-800' : 'bg-red-50 border-red-400 text-red-800'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [message.type === 'success' ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5 mr-3 text-green-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-5 h-5 mr-3 text-red-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n_s(RescheduleBookingForm, \"nP1AVavB6+3nLldJqFI6C4pVPtI=\");\n_c = RescheduleBookingForm;\nexport default RescheduleBookingForm;\nvar _c;\n$RefreshReg$(_c, \"RescheduleBookingForm\");","map":{"version":3,"names":["React","useState","useEffect","Calendar","Clock","MapPin","CheckCircle","AlertCircle","Loader2","Footer","jsxDEV","_jsxDEV","RescheduleBookingForm","booking","onRescheduleSuccess","onCancel","_s","_booking$bunkId","_booking$bunkId2","selectedDate","setSelectedDate","availableSlots","setAvailableSlots","selectedSlot","setSelectedSlot","loading","setLoading","message","setMessage","text","type","startTime","bookingDate","Date","toISOString","split","fetchAvailableSlots","bunkId","_id","res","fetch","data","json","err","console","error","handleSubmit","checkRes","method","headers","body","JSON","stringify","slotTime","checkData","available","response","localStorage","getItem","formatTimeSlot","slotData","endTime","includes","getTime","hours","minutes","today","getFullYear","getMonth","getDate","parseInt","time","warn","String","formatTime","date","getHours","getMinutes","ampm","hour","toString","padStart","startFormatted","endFormatted","startAMPM","endAMPM","startWithoutAMPM","replace","getCurrentBookingTime","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","location","htmlFor","id","value","onChange","e","target","min","required","length","map","slot","index","onClick","disabled","_c","$RefreshReg$"],"sources":["D:/UnifiedMentor/electric-charger-hub/ev-charge-hub/client/src/components/user/ResheduleSlot.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Calendar, Clock, MapPin, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\r\nimport Footer from \"../common/Footer\";\r\n\r\nconst RescheduleBookingForm = ({ booking, onRescheduleSuccess, onCancel }) => {\r\n  const [selectedDate, setSelectedDate] = useState(\"\");\r\n  const [availableSlots, setAvailableSlots] = useState([]);\r\n  const [selectedSlot, setSelectedSlot] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ text: \"\", type: \"\" });\r\n\r\n  // Set default date to booking date when component mounts\r\n  useEffect(() => {\r\n    if (booking && booking.startTime) {\r\n      const bookingDate = new Date(booking.startTime);\r\n      setSelectedDate(bookingDate.toISOString().split('T')[0]);\r\n    }\r\n  }, [booking]);\r\n\r\n  // Fetch available slots when date changes\r\n  useEffect(() => {\r\n    const fetchAvailableSlots = async () => {\r\n      if (!booking || !booking.bunkId || !booking.bunkId._id || !selectedDate) return;\r\n      \r\n      setLoading(true);\r\n      try {\r\n        // Replace with your actual API call\r\n        const res = await fetch(`/api/bookings/available-slots/${booking.bunkId._id}/${selectedDate}`);\r\n        const data = await res.json();\r\n        setAvailableSlots(data.data.availableSlots || []);\r\n      } catch (err) {\r\n        console.error(\"Error fetching available slots:\", err);\r\n        setMessage({ text: \"Failed to load available slots\", type: \"error\" });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchAvailableSlots();\r\n  }, [selectedDate, booking]);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedSlot) {\r\n      setMessage({ text: \"Please select a new time slot\", type: \"error\" });\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // First check if slot is still available\r\n      const checkRes = await fetch(\"/api/bookings/check-availability\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          bunkId: booking.bunkId._id,\r\n          slotTime: selectedSlot\r\n        })\r\n      });\r\n      const checkData = await checkRes.json();\r\n      \r\n      if (!checkData.data.available) {\r\n        setMessage({ text: \"Sorry, this slot was just booked. Please select another.\", type: \"error\" });\r\n        return;\r\n      }\r\n      \r\n      // If available, reschedule the booking\r\n      const response = await fetch(`/api/bookings/reschedule/${booking._id}`, {\r\n        method: \"PUT\",\r\n        headers: { \r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\r\n        },\r\n        body: JSON.stringify({ slotTime: selectedSlot })\r\n      });\r\n      const data = await response.json();\r\n      \r\n      setMessage({ text: \"Booking rescheduled successfully!\", type: \"success\" });\r\n      \r\n      // Notify parent component of successful reschedule\r\n      if (onRescheduleSuccess && typeof onRescheduleSuccess === 'function') {\r\n        onRescheduleSuccess(data.data);\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error(\"Reschedule error:\", err);\r\n      setMessage({ \r\n        text: \"Reschedule failed. Please try again.\", \r\n        type: \"error\" \r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Enhanced function to format time slots as ranges\r\n  const formatTimeSlot = (slotData) => {\r\n    if (!slotData) return \"\";\r\n    \r\n    let startTime, endTime;\r\n    \r\n    // Handle different slot data formats\r\n    if (typeof slotData === 'string') {\r\n      // If it's an ISO string\r\n      if (slotData.includes('T')) {\r\n        startTime = new Date(slotData);\r\n        // Assume 1-hour duration if no end time provided\r\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\r\n      } \r\n      // If it's just time like \"14:30\"\r\n      else if (slotData.includes(':')) {\r\n        const [hours, minutes] = slotData.split(':');\r\n        const today = new Date();\r\n        startTime = new Date(today.getFullYear(), today.getMonth(), today.getDate(), parseInt(hours), parseInt(minutes));\r\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\r\n      }\r\n    } \r\n    // If it's an object with start and end times\r\n    else if (typeof slotData === 'object') {\r\n      if (slotData.startTime && slotData.endTime) {\r\n        startTime = new Date(slotData.startTime);\r\n        endTime = new Date(slotData.endTime);\r\n      } else if (slotData.time) {\r\n        startTime = new Date(slotData.time);\r\n        endTime = new Date(startTime.getTime() + 60 * 60 * 1000);\r\n      }\r\n    }\r\n    \r\n    if (!startTime || !endTime) {\r\n      console.warn('Could not parse slot time:', slotData);\r\n      return String(slotData);\r\n    }\r\n    \r\n    const formatTime = (date) => {\r\n      const hours = date.getHours();\r\n      const minutes = date.getMinutes();\r\n      const ampm = hours >= 12 ? 'PM' : 'AM';\r\n      const hour = hours % 12 || 12;\r\n      \r\n      // Only show minutes if they're not 00\r\n      if (minutes === 0) {\r\n        return `${hour} ${ampm}`;\r\n      } else {\r\n        return `${hour}:${minutes.toString().padStart(2, '0')} ${ampm}`;\r\n      }\r\n    };\r\n    \r\n    const startFormatted = formatTime(startTime);\r\n    const endFormatted = formatTime(endTime);\r\n    \r\n    // If both times have the same AM/PM, show it only once\r\n    const startAMPM = startTime.getHours() >= 12 ? 'PM' : 'AM';\r\n    const endAMPM = endTime.getHours() >= 12 ? 'PM' : 'AM';\r\n    \r\n    if (startAMPM === endAMPM) {\r\n      const startWithoutAMPM = startFormatted.replace(` ${startAMPM}`, '');\r\n      return `${startWithoutAMPM} - ${endFormatted}`;\r\n    } else {\r\n      return `${startFormatted} - ${endFormatted}`;\r\n    }\r\n  };\r\n\r\n  // Format the current booking time for display\r\n  const getCurrentBookingTime = () => {\r\n    if (!booking || !booking.startTime) return \"\";\r\n    \r\n    const startTime = new Date(booking.startTime);\r\n    const endTime = new Date(booking.endTime);\r\n    \r\n    const formatTime = (date) => {\r\n      const hours = date.getHours();\r\n      const minutes = date.getMinutes();\r\n      const ampm = hours >= 12 ? 'PM' : 'AM';\r\n      const hour = hours % 12 || 12;\r\n      \r\n      if (minutes === 0) {\r\n        return `${hour} ${ampm}`;\r\n      } else {\r\n        return `${hour}:${minutes.toString().padStart(2, '0')} ${ampm}`;\r\n      }\r\n    };\r\n    \r\n    const startFormatted = formatTime(startTime);\r\n    const endFormatted = formatTime(endTime);\r\n    \r\n    // If both times have the same AM/PM, show it only once\r\n    const startAMPM = startTime.getHours() >= 12 ? 'PM' : 'AM';\r\n    const endAMPM = endTime.getHours() >= 12 ? 'PM' : 'AM';\r\n    \r\n    if (startAMPM === endAMPM) {\r\n      const startWithoutAMPM = startFormatted.replace(` ${startAMPM}`, '');\r\n      return `${startWithoutAMPM} - ${endFormatted}`;\r\n    } else {\r\n      return `${startFormatted} - ${endFormatted}`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6\">\r\n        <h2 className=\"text-2xl font-bold text-white flex items-center gap-3\">\r\n          <Calendar className=\"w-6 h-6\" />\r\n          Reschedule Booking\r\n        </h2>\r\n        <p className=\"text-blue-100 mt-1\">Select a new date and time for your booking</p>\r\n      </div>\r\n\r\n      <div className=\"p-8\">\r\n        {/* Current Booking Info */}\r\n        <div className=\"mb-8 p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl border border-gray-200\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-sm font-medium text-gray-600 uppercase tracking-wide mb-2\">Current Booking</p>\r\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\r\n                {booking?.bunkId?.name || 'Loading...'}\r\n              </h3>\r\n              <div className=\"flex items-center gap-4 text-gray-600\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin className=\"w-4 h-4\" />\r\n                  <span className=\"text-sm\">{booking?.bunkId?.location || 'Unknown location'}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <Clock className=\"w-4 h-4\" />\r\n                  <span className=\"text-sm font-medium text-blue-600\">{getCurrentBookingTime()}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"space-y-8\">\r\n          {/* Date Selection */}\r\n          <div className=\"space-y-3\">\r\n            <label htmlFor=\"date\" className=\"block text-sm font-semibold text-gray-800 uppercase tracking-wide\">\r\n              Select New Date\r\n            </label>\r\n            <div className=\"relative\">\r\n              <input\r\n                id=\"date\"\r\n                type=\"date\"\r\n                value={selectedDate}\r\n                onChange={(e) => setSelectedDate(e.target.value)}\r\n                className=\"w-full p-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg\"\r\n                min={new Date().toISOString().split('T')[0]}\r\n                required\r\n              />\r\n              <Calendar className=\"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Time Slot Selection */}\r\n          {selectedDate && (\r\n            <div className=\"space-y-4\">\r\n              <label className=\"block text-sm font-semibold text-gray-800 uppercase tracking-wide\">\r\n                Select New Time Slot\r\n              </label>\r\n              \r\n              {loading ? (\r\n                <div className=\"flex items-center justify-center py-12 text-gray-500\">\r\n                  <Loader2 className=\"w-6 h-6 animate-spin mr-3\" />\r\n                  Loading available slots...\r\n                </div>\r\n              ) : availableSlots.length > 0 ? (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\r\n                  {availableSlots.map((slot, index) => (\r\n                    <button\r\n                      key={slot?.id || slot?.time || slot || index}\r\n                      type=\"button\"\r\n                      onClick={() => setSelectedSlot(slot)}\r\n                      className={`group relative p-4 rounded-xl border-2 transition-all duration-200 transform hover:scale-105 ${\r\n                        selectedSlot === slot\r\n                          ? 'bg-blue-600 border-blue-600 text-white shadow-lg'\r\n                          : 'bg-white border-gray-200 text-gray-800 hover:border-blue-300 hover:shadow-md'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center justify-center\">\r\n                        <Clock className={`w-4 h-4 mr-2 ${\r\n                          selectedSlot === slot ? 'text-white' : 'text-gray-500'\r\n                        }`} />\r\n                        <span className=\"font-medium\">{formatTimeSlot(slot)}</span>\r\n                      </div>\r\n                      {selectedSlot === slot && (\r\n                        <CheckCircle className=\"absolute -top-2 -right-2 w-6 h-6 text-white bg-blue-600 rounded-full\" />\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12\">\r\n                  <AlertCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-500 text-lg\">No available slots for this date</p>\r\n                  <p className=\"text-gray-400 text-sm mt-1\">Please try selecting a different date</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onCancel}\r\n              className=\"flex-1 py-4 px-6 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 focus:ring-2 focus:ring-gray-300 focus:ring-offset-2\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSubmit}\r\n              disabled={loading || !selectedSlot}\r\n              className={`flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-200 focus:ring-2 focus:ring-offset-2 ${\r\n                loading || !selectedSlot\r\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n                  : 'bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 focus:ring-blue-500 shadow-lg hover:shadow-xl transform hover:scale-105'\r\n              }`}\r\n            >\r\n              {loading ? (\r\n                <div className=\"flex items-center justify-center\">\r\n                  <Loader2 className=\"w-5 h-5 animate-spin mr-2\" />\r\n                  Processing...\r\n                </div>\r\n              ) : (\r\n                'Reschedule Booking'\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Status Message */}\r\n          {message.text && (\r\n            <div className={`p-4 rounded-xl border-l-4 ${\r\n              message.type === 'success' \r\n                ? 'bg-green-50 border-green-400 text-green-800' \r\n                : 'bg-red-50 border-red-400 text-red-800'\r\n            }`}>\r\n              <div className=\"flex items-center\">\r\n                {message.type === 'success' ? (\r\n                  <CheckCircle className=\"w-5 h-5 mr-3 text-green-600\" />\r\n                ) : (\r\n                  <AlertCircle className=\"w-5 h-5 mr-3 text-red-600\" />\r\n                )}\r\n                <span className=\"font-medium\">{message.text}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div><Footer/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RescheduleBookingForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}